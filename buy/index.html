<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Capitoken — Buy / Swap</title><meta name="description" content="Buy / swap Capitoken safely. Verify contract and official links."><!-- Theme --><meta name="theme-color" content="#050c0a"><!-- Favicons / PWA --><link rel="icon" type="image/png" sizes="32x32" href="/capitoken-site/icons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/capitoken-site/icons/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/capitoken-site/icons/apple-touch-icon.png"><link rel="manifest" href="/capitoken-site/site.webmanifest"><!-- IMPORTANT: single source of truth for global styles --><link rel="stylesheet" href="/capitoken-site/global.css?v=13"></head> <body> <header class="nav"> <div class="container nav__inner"> <a class="brand" href="/capitoken-site/" aria-label="Capitoken home"> <img class="brand__img" src="/capitoken-site/brand/logo-navbar.png" alt="Capitoken" loading="eager"> </a> <nav class="nav__links" aria-label="Primary"> <a href="#launch">Launch</a><a href="#launchpanel">Panel</a><a href="#tokenomics">Tokenomics</a><a href="#roadmap">Roadmap</a><a href="/capitoken-site/verify/">Verify</a> </nav> </div> </header> <main>  <main class="container"> <section class="hero"> <div class="pill"><span class="pill__dot"></span><span>Buy / Swap</span></div> <h1>Buy / Swap</h1> <p class="hero__lead">
Only use official links. Verify the contract on <a href="./verify">/verify</a> before swapping.
</p> </section> <section class="section"> <div class="card"> <div class="kv"> <strong>Network</strong> <span>Ethereum Mainnet</span> </div> <div class="kv"> <strong>Token contract</strong> <span class="mono">TBA</span> </div> <div class="kv"> <strong>Uniswap</strong> <span class="mono">TBA</span> </div> <div class="card" style="margin-top:14px;"> <h3 style="margin:0 0 6px 0;">Safety Checklist</h3> <p class="small" style="margin:0 0 10px 0;">Complete these checks before swapping.</p> <div class="checklist"> <div class="check"><i>✓</i><div><div style="font-weight:800;">Verify the domain</div><div class="small">Only trust <span class="mono">capitoken.org</span> and the official mirror.</div></div></div> <div class="check"><i>✓</i><div><div style="font-weight:800;">Verify the contract</div><div class="small">Cross-check the token address on <a href="./verify">/verify</a>.</div></div></div> <div class="check"><i>✓</i><div><div style="font-weight:800;">Confirm network</div><div class="small">Ethereum Mainnet only. Avoid fake networks.</div></div></div> </div> </div> <!-- Safe Buy Modal --> <div class="modal" id="safe-buy-modal" aria-hidden="true"> <div class="modal__backdrop" data-close="1"></div> <div class="modal__card" role="dialog" aria-modal="true" aria-labelledby="safeBuyTitle"> <div class="modal__head"> <h3 class="modal__title" id="safeBuyTitle">Confirm Safe Buy</h3> <button class="modal__x" type="button" data-close="1">Close</button> </div> <div class="modal__body"> <div class="modal__row"> <strong>Network</strong> <span>Ethereum Mainnet</span> </div> <div class="modal__row"> <strong>Token contract</strong> <span class="mono" id="modal-contract">—</span> </div> <div class="modal__row"> <strong>Destination</strong> <span class="mono" id="modal-dst">—</span> </div> <div style="margin-top:12px;"> <label style="display:flex; gap:10px; align-items:flex-start;"> <input id="modal-check" type="checkbox" style="margin-top:3px;"> <span class="small">
I verified the contract address on <a href="./verify">/verify</a> and understand crypto is high risk.
</span> </label> </div> <div class="modal__note">
Anti-scam rule: do not trust screenshots, DMs, or “support” messages. Verify here only.
</div> <div class="modal__footer"> <button class="btn" type="button" data-close="1">Cancel</button> <button class="btn btn--primary" id="modal-confirm" type="button" disabled>Open Uniswap</button> </div> </div> </div> </div> </div> <div class="actions" style="margin-top:14px;"> <a class="btn btn--primary" href="./verify">Contract not published yet — Verify</a> <button class="btn" id="add-metamask" type="button">Add to MetaMask</button> <a class="btn" href="./links">Official Links</a> </div> <p class="small" style="margin-top:14px;">
Anti-scam rule: do not trust screenshots or DMs. Always verify the domain + contract.
</p> </section> </main>  <script type="module">const TOKEN_ADDR = "TBA";
const TOKEN = {"symbol":"CAPI","address":"TBA","decimals":18,"pairOrPoolAddress":"TBA","links":{"website":"https://capitoken-org.github.io/capitoken-site/","x":"TBA","telegram":"TBA","github":"https://github.com/Capitoken-org"}};

    const TOKEN_META = {
      address: TOKEN_ADDR,
      symbol: TOKEN.symbol,
      decimals: TOKEN.decimals,
      // Optional logo image (add later): public/token.png
      image: "https://capitoken-org.github.io/capitoken-site/token.png",
    };

    const isAddr = (v) => /^0x[a-fA-F0-9]{40}$/.test(v);

    const btn = document.getElementById("add-metamask");

// Phase 8 – Safe Buy modal
const modal = document.getElementById("safe-buy-modal");
const closeEls = modal?.querySelectorAll("[data-close="1"]") || [];
const check = document.getElementById("modal-check");
const confirmBtn = document.getElementById("modal-confirm");
const modalContract = document.getElementById("modal-contract");
const modalDst = document.getElementById("modal-dst");

let pendingUrl = null;

function openModal(url){
  pendingUrl = url;
  if (modalContract) modalContract.textContent = TOKEN_META.address || "TBA";
  if (modalDst) modalDst.textContent = url || "—";
  if (check) check.checked = false;
  if (confirmBtn) confirmBtn.disabled = true;
  if (modal){
    modal.classList.add("is-open");
    modal.setAttribute("aria-hidden", "false");
  }
}

function closeModal(){
  pendingUrl = null;
  if (modal){
    modal.classList.remove("is-open");
    modal.setAttribute("aria-hidden", "true");
  }
}

closeEls.forEach((el) => el.addEventListener("click", closeModal));
document.addEventListener("keydown", (e) => {
  if (e.key === "Escape") closeModal();
});

check?.addEventListener("change", () => {
  if (confirmBtn) confirmBtn.disabled = !check.checked;
});

confirmBtn?.addEventListener("click", () => {
  if (!pendingUrl) return;
  window.open(pendingUrl, "_blank", "noopener,noreferrer");
  closeModal();
});

// Intercept the Uniswap button (only when url is real)
const primaryLink = document.querySelector("a.btn.btn--primary[href]");
if (primaryLink && primaryLink.getAttribute("href") && primaryLink.getAttribute("href") !== "TBA") {
  primaryLink.addEventListener("click", (e) => {
    const href = primaryLink.getAttribute("href");
    if (!href || href === "TBA") return;
    e.preventDefault();
    openModal(href);
  });
}
    btn?.addEventListener("click", async () => {
      try {
        if (!window.ethereum) {
          alert("No Web3 wallet detected. Install MetaMask or use a Web3-enabled browser.");
          return;
        }
        if (!isAddr(TOKEN_META.address)) {
          alert("Token contract is not published yet. Check /verify.");
          return;
        }

        // MetaMask: watch asset
        const ok = await window.ethereum.request({
          method: "wallet_watchAsset",
          params: {
            type: "ERC20",
            options: {
              address: TOKEN_META.address,
              symbol: TOKEN_META.symbol,
              decimals: TOKEN_META.decimals,
              image: TOKEN_META.image,
            },
          },
        });

        if (ok) alert("Token added to wallet.");
      } catch (e) {
        console.error(e);
        alert("Could not add token. Verify contract and try again.");
      }
    });
  </script>  </main> </body></html>