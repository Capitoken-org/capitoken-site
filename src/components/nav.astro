---
const base = import.meta.env.BASE_URL; // "/" in dev, "/capitoken-site/" in build

const LINKS = [
  { label: "Home", href: "/" },
  { label: "Launch", href: "/launch" },
  { label: "Tokenomics", href: "/tokenomics" },
  { label: "Roadmap", href: "/roadmap" },
  { label: "FAQ", href: "/#faq" },
  { label: "Links", href: "/links" },
  { label: "Verify", href: "/verify" },
  { label: "Checklist", href: "/checklist" },
];

function withBase(href) {
  // Anchors stay as-is
  if (href.startsWith("#")) return href;

  // External links stay as-is
  if (href.startsWith("http://") || href.startsWith("https://")) return href;

  // Internal routes get BASE_URL
  const clean = href.startsWith("/") ? href.slice(1) : href;
  return `${base}${clean}`.replace(/\/{2,}/g, "/");
}
---

<header class="nav">
  <div class="nav__inner">
    <a class="brand" href={withBase("/")}>
      <span class="brand_dot" aria-hidden="true"></span>
      <span class="brand_name">Capitoken</span>
    </a>

    <nav class="nav__links" aria-label="Primary">
      {LINKS.map((l) => <a href={withBase(l.href)}>{l.label}</a>)}
    </nav>
  </div>
</header>
