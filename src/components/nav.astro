---
/**
 * NAV (sticky) + socials + ticker
 * - Keeps logo + menu on the first row
 * - Social icons under the menu (right aligned)
 * - Live ticker edge-to-edge, scrolling right-to-left
 */
const BASE = import.meta.env.BASE_URL || "/";
const withBase = (p) => {
  const clean = String(p || "");
  return clean.startsWith("/") ? `${BASE}${clean.slice(1)}` : `${BASE}${clean}`;
};

// Keep labels aligned with section IDs in index.astro
const links = [
  { href: "#launchpanel", label: "Launch Panel" },
  { href: "#venues", label: "Markets" },
  { href: "#tokenomics", label: "Tokenomics" },
  { href: "#roadmap", label: "Roadmap" },
  { href: "#daily", label: "Daily" },
  { href: "#community", label: "Community" },
  { href: "#faq", label: "FAQ" },
  // Verify is a separate page
  { href: `${BASE}verify/`, label: "Verify" },
];

const socials = [
  { key: "x",  label: "X",  href: "https://x.com/Capitokenorg", enabled: true },
  { key: "tg", label: "TG", href: "#", enabled: false },
  { key: "ds", label: "DS", href: "#", enabled: false },
  { key: "rd", label: "RD", href: "#", enabled: false },
  { key: "yt", label: "YT", href: "https://www.youtube.com/channel/UCY5xCVzo-k6hGdR4xhUhTNQ", enabled: true },
  { key: "ig", label: "IG", href: "#", enabled: false },
  { key: "fb", label: "FB", href: "#", enabled: false },
];
---

<header class="nav">
  <!-- Row 1: logo + menu -->
  <div class="container nav__inner">
    <a class="brand" href={BASE} aria-label="Capitoken home">
      <img
        class="brand__img"
        src={withBase("/logo/navbar-logo.png")}
        alt="Capitoken"
        loading="eager"
        decoding="async"
      />
    </a>

    <nav class="nav__links" aria-label="Primary">
      {links.map((l) => (
        <a href={l.href}>{l.label}</a>
      ))}
    </nav>
  </div>

  <!-- Row 2: socials under the menu -->
  <div class="nav__subrow">
    <div class="nav__subrow-inner">
      <div class="nav__socials" aria-label="Social links">
        {socials.map((s) => (
          <a
            class={`social__icon ${s.enabled ? "" : "is-disabled"}`}
            href={s.enabled ? s.href : undefined}
            aria-label={s.enabled ? s.label : `${s.label} (coming soon)`}
            title={s.enabled ? s.label : `${s.label} (coming soon)`}
            target={s.enabled ? "_blank" : undefined}
            rel={s.enabled ? "noopener noreferrer" : undefined}
          >
            {s.label}
          </a>
        ))}
      </div>
    </div>
  </div>

  <!-- Row 3: edge-to-edge ticker -->
  <div class="tickerbar" role="region" aria-label="Market ticker">
    <div class="tickerbar__inner">
      <span class="tickerbar__tag">LIVE</span>

      <div class="tickerbar__viewport">
        <div class="tickerbar__track">
          <div id="ticker" class="ticker" aria-live="polite">Loading pricesâ€¦</div>
          <div class="ticker ticker--clone" aria-hidden="true"></div>
        </div>
      </div>

      <div id="ticker-clock" class="tickerbar__clock" aria-label="Local time"></div>
    </div>
  </div>
</header>
