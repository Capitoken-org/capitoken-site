---
const base = import.meta.env.BASE_URL || "/";
const pathname = Astro.url.pathname;
const isHome = pathname === base || pathname === "/" || pathname.startsWith(base);

const LINKS = [
  { label: "Home", href: "/" },
  { label: "Launch", href: "/#launch" },
  { label: "Tokenomics", href: "/tokenomics" },
  { label: "Roadmap", href: "/#roadmap" },
  { label: "FAQ", href: "/#faq" },
  { label: "Links", href: "/links" },
  { label: "Verify", href: "/verify" },
  { label: "Checklist", href: "/checklist" },
];

function fixHref(href: string) {
  if (href.startsWith("#")) return href;
  if (href.startsWith("http")) return href;

  const clean = href.startsWith("/") ? href.slice(1) : href;
  return `${base}${clean}`.replace(/\/{2,}/g, "/");
}
---

<nav class="nav">
  <div class="container nav__inner">
    <a class="brand" href={fixHref("/")}>
      <span class="brand__dot"></span>
      <span class="brand__name">Capitoken</span>
    </a>

    <div class="nav__links">
      {LINKS.map((l) => (
        <a href={fixHref(l.href)}>{l.label}</a>
      ))}
    </div>
  </div>
</nav>
