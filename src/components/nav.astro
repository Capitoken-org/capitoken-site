---
/**
 * Navbar + Socials + Live ticker (CAPI).
 * - All rows aligned to the same .container width as the rest of the site.
 * - Social icons + clock sit between menu and ticker (as requested).
 */
const BASE = import.meta.env.BASE_URL || "/";
const withBase = (p) => {
  const clean = String(p || "");
  return clean.startsWith("/") ? `${BASE}${clean.slice(1)}` : `${BASE}${clean}`;
};

const links = [
  { href: "#launchpanel", label: "Launch Panel" },
  { href: "#venues", label: "Markets" },
  { href: "#tokenomics", label: "Tokenomics" },
  { href: "#roadmap", label: "Roadmap" },
  { href: "#daily", label: "Daily" },
  { href: "#community", label: "Community" },
  { href: "#faq", label: "FAQ" },
  { href: `${BASE}verify/`, label: "Verify" },
];

const socials = [
  { key: "x", label: "X", href: "https://x.com/Capitokenorg" },
  { key: "tg", label: "Telegram", href: "https://t.me/capitoken_official" },
  { key: "dc", label: "Discord", href: "#" },
  { key: "rd", label: "Reddit", href: "#" },
  { key: "yt", label: "YouTube", href: "https://www.youtube.com/@CapiToken" },
  { key: "ig", label: "Instagram", href: "#" },
  { key: "fb", label: "Facebook", href: "#" },
];
---

<header class="nav" role="banner">
  <div class="container nav__stack">
    <!-- Row 1: Logo + menu -->
    <div class="nav__inner">
      <a class="brand" href={BASE} aria-label="Capitoken home">
        <img
          class="brand__img"
          src={withBase("/brand/logo-navbar.png")}
          alt="Capitoken"
          loading="eager"
          decoding="async"
        />
        <span class="sr-only">Capitoken</span>
      </a>

      <nav class="nav__links" aria-label="Primary navigation">
        {links.map((l) => (
          <a href={l.href}>{l.label}</a>
        ))}
      </nav>
    </div>

    <!-- Row 2: Social icons + local clock (between menu and ticker) -->
    <div class="nav__meta" aria-label="Social links and local time">
      <div class="nav__socials" aria-label="Social links">
        {socials.map((s) => (
          <a class="social" href={s.href} target="_blank" rel="noopener noreferrer" aria-label={s.label} title={s.label}>
            <span class={`social__badge social__badge--${s.key}`}>{s.key.toUpperCase()}</span>
            <span class="sr-only">{s.label}</span>
          </a>
        ))}
      </div>

      <div class="nav__clock" aria-label="Local time">
        <span id="navClock">--/--/----, --:--:--</span>
      </div>
    </div>

    <!-- Row 3: Live ticker (aligned to container edges) -->
    <div class="nav__ticker" aria-label="Live prices ticker">
      <span class="ticker__pill">LIVE</span>

      <div class="ticker" aria-hidden="false">
        <div class="ticker__viewport">
          <div id="ticker" class="ticker__track">Loading pricesâ€¦</div>
          <div class="ticker__track ticker__track--clone" aria-hidden="true"></div>
        </div>
      </div>
    </div>
  </div>
</header>
