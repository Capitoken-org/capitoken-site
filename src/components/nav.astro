---
const base = import.meta.env.BASE_URL || "/";

const withBase = (p: string) => {
  const clean = p.startsWith("/") ? p.slice(1) : p;
  return `${base}${clean}`;
};

const LINKS = [
  { label: "Home", href: "/" },
  { label: "Launch", href: "/#launch" },
  { label: "Tokenomics", href: "/tokenomics" },
  { label: "Roadmap", href: "/#roadmap" },
  { label: "FAQ", href: "/#faq" },
  { label: "Links", href: "/links" },
  { label: "Verify", href: "/verify" },
  { label: "Checklist", href: "/checklist" },
];

function fixHref(href: string) {
  if (href.startsWith("#")) return href;
  if (href.startsWith("http")) return href;

  const clean = href.startsWith("/") ? href.slice(1) : href;
  return `${base}${clean}`.replace(/\/{2,}/g, "/");
}
---

<nav class="nav">
  <div class="container nav__inner">
    <a class="brand" href={fixHref("/")}>
      <img
        class="brand__logo"
        src={withBase("/logo/capitoken-white.png")}
        alt="Capitoken"
        width="26"
        height="26"
      />
      <span class="brand__text">Capitoken</span>
    </a>

    <div class="nav__links">
      {LINKS.map((l) => (
        <a href={fixHref(l.href)}>{l.label}</a>
      ))}
    </div>
  </div>
</nav>
