---
/**
 * Nav component (NO <html>/<body> here).
 * Uses BASE_URL for GitHub Pages subpath safety.
 */
const BASE = import.meta.env.BASE_URL || "/";
const withBase = (p) => {
  const clean = String(p || "");
  return clean.startsWith("/") ? `${BASE}${clean.slice(1)}` : `${BASE}${clean}`;
};

const links = [
  { href: "#launchpanel", label: "Launch Panel" },
  { href: "#venues", label: "Markets" },
  { href: "#tokenomics", label: "Tokenomics" },
  { href: "#roadmap", label: "Roadmap" },
  { href: "#daily", label: "Daily" },
  { href: "#community", label: "Community" },
  { href: "#faq", label: "FAQ" },
  // /verify is a separate page (not a section on index)
  { href: withBase("/verify/"), label: "Verify", isPage: true },
];

// Social links (disable ones not live yet)
const socials = [
  { key: "x", label: "X", href: "https://x.com/Capitokenorg", enabled: true },
  // Set these to the official links when ready (leave disabled until confirmed)
  { key: "telegram", label: "Telegram", href: "#", enabled: false },
  { key: "discord", label: "Discord", href: "#", enabled: false },
  { key: "reddit", label: "Reddit", href: "#", enabled: false },
  { key: "youtube", label: "YouTube", href: "https://www.youtube.com/@CapiToken", enabled: true },
  { key: "instagram", label: "Instagram", href: "#", enabled: false },
  { key: "facebook", label: "Facebook", href: "#", enabled: false },
];
---

<header class="nav" role="banner">
  <div class="container nav__inner">
    <a class="brand" href={BASE} aria-label="Capitoken home">
      <img
        class="brand__img"
        src={withBase("/brand/logo-navbar.png")}
        alt="Capitoken"
        loading="eager"
        decoding="async"
      />
      <span class="sr-only">Capitoken</span>
    </a>

    <div class="nav__right">
      <nav class="nav__links" aria-label="Primary navigation">
        {links.map((l) => (
          <a href={l.href}>{l.label}</a>
        ))}
      </nav>

      <div class="nav__social" aria-label="Official social links">
        {socials.map((s) => (
          <a
            class={`social ${s.enabled ? "" : "is-disabled"}`}
            href={s.enabled ? s.href : "#"}
            aria-label={s.label}
            aria-disabled={s.enabled ? "false" : "true"}
            title={s.enabled ? s.label : `${s.label} (coming soon)`}
            target={s.enabled ? "_blank" : undefined}
            rel={s.enabled ? "noopener noreferrer" : undefined}
          >
            <svg viewBox="0 0 24 24" class="ico" aria-hidden="true">
              {s.key === "x" && (
                <path d="M18.9 2H22l-6.8 7.8L23 22h-6.6l-5.2-6.5L5.6 22H2.5l7.3-8.4L1 2h6.7l4.7 5.9L18.9 2zm-1.2 18h1.7L6.8 3.9H5L17.7 20z"></path>
              )}
              {s.key === "telegram" && (
                <path d="M21.8 4.2 3.3 11.6c-1.3.5-1.2 1.2-.2 1.5l4.7 1.5 10.9-6.9c.5-.3 1-.1.6.2l-8.9 8.1-.3 4.1c.5 0 .7-.2 1-.5l2.3-2.2 4.8 3.5c.9.5 1.5.2 1.7-.8L23 5.6c.3-1.3-.5-1.9-1.2-1.4z"></path>
              )}
              {s.key === "discord" && (
                <path d="M19.3 5.3A16 16 0 0 0 15.7 4l-.2.5c1.3.3 2.5.8 3.6 1.4a12.7 12.7 0 0 0-11.2 0c1.1-.6 2.3-1.1 3.6-1.4L11.3 4a16 16 0 0 0-3.6 1.3C5.7 8.2 5.1 11 5.3 13.8c1.5 1.1 3 1.8 4.6 2.2l.7-1.1c-.5-.2-1-.4-1.5-.7l.4-.3a9.9 9.9 0 0 0 9 0l.4.3c-.5.3-1 .5-1.5.7l.7 1.1c1.6-.4 3.1-1.1 4.6-2.2.2-2.8-.4-5.6-2.4-8.5ZM10 13c-.6 0-1.1-.6-1.1-1.3s.5-1.3 1.1-1.3c.7 0 1.2.6 1.1 1.3 0 .7-.5 1.3-1.1 1.3Zm4 0c-.6 0-1.1-.6-1.1-1.3s.5-1.3 1.1-1.3c.7 0 1.2.6 1.1 1.3 0 .7-.5 1.3-1.1 1.3Z"></path>
              )}
              {s.key === "reddit" && (
                <path d="M12 7.2c-2.9 0-5.3 1.7-5.3 3.9 0 2.2 2.4 3.9 5.3 3.9s5.3-1.7 5.3-3.9c0-2.2-2.4-3.9-5.3-3.9Zm-2 3.2a.9.9 0 1 1 0 1.8.9.9 0 0 1 0-1.8Zm4 0a.9.9 0 1 1 0 1.8.9.9 0 0 1 0-1.8Zm-3 3.4a3.1 3.1 0 0 0 2 0 .6.6 0 0 1 .4 1.1 4.4 4.4 0 0 1-2.8 0 .6.6 0 0 1 .4-1.1ZM22 11.1a1.5 1.5 0 0 0-2.6-1l-2.7-1.6a7.8 7.8 0 0 0-3.2-1l.7-3.2 2.2.5a1.3 1.3 0 1 0 .3-1.2l-3.2-.8a1.3 1.3 0 0 0-1.5 1l-.9 4.1a7.8 7.8 0 0 0-3.3 1L4.6 10a1.5 1.5 0 1 0-1 2.7c-.1.3-.1.6-.1.9 0 3 3.9 5.4 8.5 5.4s8.5-2.4 8.5-5.4c0-.3 0-.6-.1-.9.6-.2 1.2-.8 1.2-1.6Z"></path>
              )}
              {s.key === "youtube" && (
                <path d="M21.6 7.2a2.7 2.7 0 0 0-1.9-1.9C18 4.8 12 4.8 12 4.8s-6 0-7.7.5A2.7 2.7 0 0 0 2.4 7.2 28.3 28.3 0 0 0 2 12a28.3 28.3 0 0 0 .4 4.8 2.7 2.7 0 0 0 1.9 1.9c1.7.5 7.7.5 7.7.5s6 0 7.7-.5a2.7 2.7 0 0 0 1.9-1.9A28.3 28.3 0 0 0 22 12a28.3 28.3 0 0 0-.4-4.8ZM10.2 15.1V8.9L15.6 12l-5.4 3.1Z"></path>
              )}
              {s.key === "instagram" && (
                <path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5Zm10 2H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3Zm-5 3.5A4.5 4.5 0 1 1 7.5 12 4.5 4.5 0 0 1 12 7.5ZM12 9.5A2.5 2.5 0 1 0 14.5 12 2.5 2.5 0 0 0 12 9.5ZM17.8 6.2a1 1 0 1 1-1 1 1 1 0 0 1 1-1Z"></path>
              )}
              {s.key === "facebook" && (
                <path d="M13.5 22v-8h2.7l.4-3h-3.1V9.1c0-.9.3-1.5 1.6-1.5h1.7V5c-.3 0-1.4-.1-2.6-.1-2.6 0-4.3 1.6-4.3 4.5V11H7.3v3h2.6v8h3.6Z"></path>
              )}
            </svg>
          </a>
        ))}
      </div>
    </div>
  </div>

  <div class="nav__ticker" role="region" aria-label="Live market ticker">
    <div class="container nav__ticker-inner">
      <div class="ticker" aria-live="polite">
        <span class="ticker__label">LIVE</span>
        <div class="ticker__viewport">
          <div class="ticker__track" id="capiTickerTrack">Loading pricesâ€¦</div>
        </div>
      </div>
      <div class="ticker__time" id="capiTickerTime">--:--</div>
    </div>
  </div>
</header>
